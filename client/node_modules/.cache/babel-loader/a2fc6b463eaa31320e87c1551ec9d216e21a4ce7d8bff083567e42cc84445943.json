{"ast":null,"code":"import React,{useState,useEffect,useContext}from'react';import{Link}from'react-router-dom';import moment from'moment';import FavoriteBorderOutlinedIcon from'@mui/icons-material/FavoriteBorderOutlined';import FavoriteOutlinedIcon from'@mui/icons-material/FavoriteOutlined';import TextsmsOutlinedIcon from'@mui/icons-material/TextsmsOutlined';import ShareOutlinedIcon from'@mui/icons-material/ShareOutlined';import MoreHorizIcon from'@mui/icons-material/MoreHoriz';import Comments from'../comments/Comments';import{usePosts}from'../../context/PostsContext';import{AuthContext}from'../../context/authContext';import'./post.scss';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Post=_ref=>{var _likes$post$id2,_likes$post$id3;let{post}=_ref;const[commentOpen,setCommentOpen]=useState(false);const[menuOpen,setMenuOpen]=useState(false);const{currentUser}=useContext(AuthContext);const{likes,fetchLikes,addLike,removeLike,deletePost}=usePosts();useEffect(()=>{fetchLikes(post.id);},[post.id,fetchLikes]);const handleLike=e=>{var _likes$post$id;e.preventDefault();if((_likes$post$id=likes[post.id])!==null&&_likes$post$id!==void 0&&_likes$post$id.includes(currentUser.id)){removeLike(post.id,currentUser.id);}else{addLike(post.id,currentUser.id);}};const handleDelete=()=>{deletePost(post.id);};return/*#__PURE__*/_jsx(\"div\",{className:\"post\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"user\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"userInfo\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/upload/\"+post.profilePic,alt:\"\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"details\",children:[/*#__PURE__*/_jsx(Link,{to:\"/profile/\".concat(post.userId),style:{textDecoration:\"none\",color:\"inherit\"},children:/*#__PURE__*/_jsx(\"span\",{className:\"name\",children:post.name})}),/*#__PURE__*/_jsx(\"span\",{className:\"date\",children:moment(post.createdAt).fromNow()})]})]}),/*#__PURE__*/_jsx(MoreHorizIcon,{onClick:()=>setMenuOpen(!menuOpen)}),menuOpen&&post.userId===currentUser.id&&/*#__PURE__*/_jsx(\"button\",{onClick:handleDelete,children:\"delete\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[/*#__PURE__*/_jsx(\"p\",{children:post.desc}),/*#__PURE__*/_jsx(\"img\",{src:\"/upload/\"+post.img,alt:\"\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"item\",onClick:handleLike,children:[(_likes$post$id2=likes[post.id])!==null&&_likes$post$id2!==void 0&&_likes$post$id2.includes(currentUser.id)?/*#__PURE__*/_jsx(FavoriteOutlinedIcon,{style:{color:\"red\"}}):/*#__PURE__*/_jsx(FavoriteBorderOutlinedIcon,{}),((_likes$post$id3=likes[post.id])===null||_likes$post$id3===void 0?void 0:_likes$post$id3.length)||0,\" Likes\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"item\",onClick:()=>setCommentOpen(!commentOpen),children:[/*#__PURE__*/_jsx(TextsmsOutlinedIcon,{}),\"See Comments\"]})]}),commentOpen&&/*#__PURE__*/_jsx(Comments,{postId:post.id})]})});};export default Post;","map":{"version":3,"names":["React","useState","useEffect","useContext","Link","moment","FavoriteBorderOutlinedIcon","FavoriteOutlinedIcon","TextsmsOutlinedIcon","ShareOutlinedIcon","MoreHorizIcon","Comments","usePosts","AuthContext","jsx","_jsx","jsxs","_jsxs","Post","_ref","_likes$post$id2","_likes$post$id3","post","commentOpen","setCommentOpen","menuOpen","setMenuOpen","currentUser","likes","fetchLikes","addLike","removeLike","deletePost","id","handleLike","e","_likes$post$id","preventDefault","includes","handleDelete","className","children","src","profilePic","alt","to","concat","userId","style","textDecoration","color","name","createdAt","fromNow","onClick","desc","img","length","postId"],"sources":["C:/Users/zaina/OneDrive/Skrivbord/SocialPost-Project/client/src/components/post/Post.jsx"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport moment from 'moment';\r\nimport FavoriteBorderOutlinedIcon from '@mui/icons-material/FavoriteBorderOutlined';\r\nimport FavoriteOutlinedIcon from '@mui/icons-material/FavoriteOutlined';\r\nimport TextsmsOutlinedIcon from '@mui/icons-material/TextsmsOutlined';\r\nimport ShareOutlinedIcon from '@mui/icons-material/ShareOutlined';\r\nimport MoreHorizIcon from '@mui/icons-material/MoreHoriz';\r\nimport Comments from '../comments/Comments';\r\nimport { usePosts } from '../../context/PostsContext';\r\nimport { AuthContext } from '../../context/authContext';\r\nimport './post.scss';\r\n\r\nconst Post = ({ post }) => {\r\n  const [commentOpen, setCommentOpen] = useState(false);\r\n  const [menuOpen, setMenuOpen] = useState(false);\r\n\r\n  const { currentUser } = useContext(AuthContext);\r\n\r\n  \r\n  const { likes, fetchLikes, addLike, removeLike, deletePost } = usePosts();\r\n\r\n  useEffect(() => {\r\n    fetchLikes(post.id);\r\n  }, [post.id, fetchLikes]);\r\n\r\n  const handleLike = (e) => {\r\n    e.preventDefault();\r\n    if (likes[post.id]?.includes(currentUser.id)) {\r\n      removeLike(post.id, currentUser.id);\r\n    } else {\r\n      addLike(post.id, currentUser.id);\r\n    }\r\n  };\r\n\r\n  const handleDelete = () => {\r\n    deletePost(post.id);\r\n  };\r\n\r\n  return (\r\n    <div className=\"post\">\r\n      <div className=\"container\">\r\n        <div className=\"user\">\r\n          <div className=\"userInfo\">\r\n            <img src={\"/upload/\" + post.profilePic} alt=\"\" />\r\n            <div className=\"details\">\r\n              <Link to={`/profile/${post.userId}`} style={{ textDecoration: \"none\", color: \"inherit\" }}>\r\n                <span className=\"name\">{post.name}</span>\r\n              </Link>\r\n              <span className=\"date\">{moment(post.createdAt).fromNow()}</span>\r\n            </div>\r\n          </div>\r\n          <MoreHorizIcon onClick={() => setMenuOpen(!menuOpen)} />\r\n          {menuOpen && post.userId === currentUser.id && <button onClick={handleDelete}>delete</button>}\r\n        </div>\r\n        <div className=\"content\">\r\n          <p>{post.desc}</p>\r\n          <img src={\"/upload/\" + post.img} alt=\"\" />\r\n        </div>\r\n        <div className=\"info\">\r\n          <div className=\"item\" onClick={handleLike}>\r\n            {likes[post.id]?.includes(currentUser.id) ? (\r\n              <FavoriteOutlinedIcon style={{ color: \"red\" }} />\r\n            ) : (\r\n              <FavoriteBorderOutlinedIcon />\r\n            )}\r\n            {likes[post.id]?.length || 0} Likes\r\n          </div>\r\n          <div className=\"item\" onClick={() => setCommentOpen(!commentOpen)}>\r\n            <TextsmsOutlinedIcon />\r\n            See Comments\r\n          </div>\r\n{/*           <div className=\"item\">\r\n            <ShareOutlinedIcon />\r\n            Share\r\n          </div> */}\r\n        </div>\r\n        {commentOpen && <Comments postId={post.id} />}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Post;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
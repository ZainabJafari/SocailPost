{"ast":null,"code":"import{useContext,useState,useEffect}from\"react\";import\"./comments.scss\";import{AuthContext}from\"../../context/authContext\";import moment from\"moment\";import{usePosts}from\"../../context/PostsContext\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Comments=_ref=>{let{postId}=_ref;const[desc,setDesc]=useState(\"\");const{comments,fetchComments,createComment}=usePosts();useEffect(()=>{fetchComments(postId);},[postId,fetchComments]);const handleClick=async e=>{e.preventDefault();await createComment({desc,postId});setDesc(\"\");};return/*#__PURE__*/_jsxs(\"div\",{className:\"comments\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"write\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Write a comment...\",value:desc,onChange:e=>setDesc(e.target.value),className:\"comment-input\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleClick,className:\"send-button\",children:\"Send\"})]}),comments.filter(comment=>comment.postId===postId).map(comment=>/*#__PURE__*/_jsxs(\"div\",{className:\"comment\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/upload/\"+comment.profilePic,alt:\"Profile\",className:\"comment-profile-pic\"}),/*#__PURE__*/_jsx(\"span\",{className:\"comment-name\",children:comment.name}),/*#__PURE__*/_jsx(\"div\",{className:\"info\",children:/*#__PURE__*/_jsx(\"p\",{className:\"comment-desc\",children:comment.desc})}),/*#__PURE__*/_jsx(\"span\",{className:\"date\",children:moment(comment.createdAt).fromNow()})]},comment.id))]});};export default Comments;","map":{"version":3,"names":["useContext","useState","useEffect","AuthContext","moment","usePosts","jsx","_jsx","jsxs","_jsxs","Comments","_ref","postId","desc","setDesc","comments","fetchComments","createComment","handleClick","e","preventDefault","className","children","type","placeholder","value","onChange","target","onClick","filter","comment","map","src","profilePic","alt","name","createdAt","fromNow","id"],"sources":["C:/Users/zaina/OneDrive/Skrivbord/SocialPost-Project/client/src/components/comments/Comments.jsx"],"sourcesContent":["import { useContext, useState, useEffect } from \"react\";\r\nimport \"./comments.scss\";\r\nimport { AuthContext } from \"../../context/authContext\";\r\nimport moment from \"moment\";\r\nimport { usePosts } from \"../../context/PostsContext\";\r\n\r\nconst Comments = ({ postId }) => {\r\n  const [desc, setDesc] = useState(\"\");\r\n  const { comments, fetchComments, createComment } = usePosts();\r\n\r\n  useEffect(() => {\r\n    fetchComments(postId);\r\n  }, [postId, fetchComments]);\r\n\r\n  const handleClick = async (e) => {\r\n    e.preventDefault();\r\n    await createComment({ desc, postId });\r\n    setDesc(\"\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"comments\">\r\n      <div className=\"write\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Write a comment...\"\r\n          value={desc}\r\n          onChange={(e) => setDesc(e.target.value)}\r\n          className=\"comment-input\"\r\n        />\r\n        <button onClick={handleClick} className=\"send-button\">Send</button>\r\n      </div>\r\n      {comments\r\n        .filter((comment) => comment.postId === postId)\r\n        .map((comment) => (\r\n          <div className=\"comment\" key={comment.id}>\r\n            <img src={\"/upload/\" + comment.profilePic} alt=\"Profile\" className=\"comment-profile-pic\"/>\r\n              <span className=\"comment-name\">{comment.name}</span>\r\n            <div className=\"info\">\r\n              <p className=\"comment-desc\">{comment.desc}</p>\r\n            </div>\r\n            <span className=\"date\">{moment(comment.createdAt).fromNow()}</span>\r\n          </div>\r\n        ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Comments;\r\n"],"mappings":"AAAA,OAASA,UAAU,CAAEC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CACvD,MAAO,iBAAiB,CACxB,OAASC,WAAW,KAAQ,2BAA2B,CACvD,MAAO,CAAAC,MAAM,KAAM,QAAQ,CAC3B,OAASC,QAAQ,KAAQ,4BAA4B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEtD,KAAM,CAAAC,QAAQ,CAAGC,IAAA,EAAgB,IAAf,CAAEC,MAAO,CAAC,CAAAD,IAAA,CAC1B,KAAM,CAACE,IAAI,CAAEC,OAAO,CAAC,CAAGb,QAAQ,CAAC,EAAE,CAAC,CACpC,KAAM,CAAEc,QAAQ,CAAEC,aAAa,CAAEC,aAAc,CAAC,CAAGZ,QAAQ,CAAC,CAAC,CAE7DH,SAAS,CAAC,IAAM,CACdc,aAAa,CAACJ,MAAM,CAAC,CACvB,CAAC,CAAE,CAACA,MAAM,CAAEI,aAAa,CAAC,CAAC,CAE3B,KAAM,CAAAE,WAAW,CAAG,KAAO,CAAAC,CAAC,EAAK,CAC/BA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClB,KAAM,CAAAH,aAAa,CAAC,CAAEJ,IAAI,CAAED,MAAO,CAAC,CAAC,CACrCE,OAAO,CAAC,EAAE,CAAC,CACb,CAAC,CAED,mBACEL,KAAA,QAAKY,SAAS,CAAC,UAAU,CAAAC,QAAA,eACvBb,KAAA,QAAKY,SAAS,CAAC,OAAO,CAAAC,QAAA,eACpBf,IAAA,UACEgB,IAAI,CAAC,MAAM,CACXC,WAAW,CAAC,oBAAoB,CAChCC,KAAK,CAAEZ,IAAK,CACZa,QAAQ,CAAGP,CAAC,EAAKL,OAAO,CAACK,CAAC,CAACQ,MAAM,CAACF,KAAK,CAAE,CACzCJ,SAAS,CAAC,eAAe,CAC1B,CAAC,cACFd,IAAA,WAAQqB,OAAO,CAAEV,WAAY,CAACG,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAC,MAAI,CAAQ,CAAC,EAChE,CAAC,CACLP,QAAQ,CACNc,MAAM,CAAEC,OAAO,EAAKA,OAAO,CAAClB,MAAM,GAAKA,MAAM,CAAC,CAC9CmB,GAAG,CAAED,OAAO,eACXrB,KAAA,QAAKY,SAAS,CAAC,SAAS,CAAAC,QAAA,eACtBf,IAAA,QAAKyB,GAAG,CAAE,UAAU,CAAGF,OAAO,CAACG,UAAW,CAACC,GAAG,CAAC,SAAS,CAACb,SAAS,CAAC,qBAAqB,CAAC,CAAC,cACxFd,IAAA,SAAMc,SAAS,CAAC,cAAc,CAAAC,QAAA,CAAEQ,OAAO,CAACK,IAAI,CAAO,CAAC,cACtD5B,IAAA,QAAKc,SAAS,CAAC,MAAM,CAAAC,QAAA,cACnBf,IAAA,MAAGc,SAAS,CAAC,cAAc,CAAAC,QAAA,CAAEQ,OAAO,CAACjB,IAAI,CAAI,CAAC,CAC3C,CAAC,cACNN,IAAA,SAAMc,SAAS,CAAC,MAAM,CAAAC,QAAA,CAAElB,MAAM,CAAC0B,OAAO,CAACM,SAAS,CAAC,CAACC,OAAO,CAAC,CAAC,CAAO,CAAC,GANvCP,OAAO,CAACQ,EAOjC,CACN,CAAC,EACD,CAAC,CAEV,CAAC,CAED,cAAe,CAAA5B,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}